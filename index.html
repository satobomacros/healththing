
<!DOCTYPE HTML>
<html>
<head>
	<title>Life Counter</title>
	<meta http-equiv="X-UA-Compatible" content="chrome=1, IE=9">
	<meta name="format-detection" content="telephone=no">
	<meta name="HandheldFriendly" content="true" />
	<meta name="robots" content="noindex,nofollow" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="apple-mobile-web-app-title" content="Life Counter">
	<meta name="viewport" content="initial-scale=1 maximum-scale=1 user-scalable=0 minimal-ui" />
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	<!-- non-retina iPhone pre iOS 7 -->
	<link rel="apple-touch-icon" sizes="57x57" href="icons/app_icon_57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="icons/app_icon_60x60.png">
	<!-- non-retina iPad pre iOS 7 -->
	<link rel="apple-touch-icon" sizes="72x72" href="icons/app_icon_72x72.png">
	<!-- non-retina iPad iOS 7 -->
	<link rel="apple-touch-icon" sizes="76x76" href="icons/app_icon_76x76.png">
	<!-- retina iPhone pre iOS 7 -->
	<link rel="apple-touch-icon" sizes="114x114" href="icons/app_icon_114x114.png">
	<!-- retina iPhone iOS 7 -->
	<link rel="apple-touch-icon" sizes="120x120" href="icons/app_icon_120x120.png">
	<!-- retina iPad pre iOS 7 -->
	<link rel="apple-touch-icon" sizes="144x144" href="icons/app_icon_144x144.png">
	<!-- retina iPad iOS 7 -->
	<link rel="apple-touch-icon" sizes="152x152" href="icons/app_icon_152x152.png">
	<link rel="apple-touch-icon" sizes="256x256" href="icons/app_icon_256x256.png">
	<link rel="apple-touch-icon" sizes="512x512" href="icons/app_icon_512x512.png">
	<link rel="apple-touch-icon" sizes="1024x1024" href="icons/app_icon_1024x1024.png">
  <script src="https://dl.dropboxusercontent.com/u/126206/processing/processing-1.4.1.min.js"></script>
</head>
<body bgcolor="#303030">
<style type="text/css">
    body {
        margin: 0;
        padding: 0;
    }
</style>
<script type="application/processing">
int playerA=20;
int playerB=20;
int settei=0;
float x=0;
float y=0;
float dragsize=height/3;
int fontsize=40;
String damages="damages display in this";
int Asaikoro;
int Bsaikoro;
int Abefore;
int Bbefore;
int Adamage;
int Bdamage;
int Adamages;
int Bdamages;
int value;
int dragy;
int beforerect=0;
int colorrush=0;
int colorrushpoint=0;
/* @pjs
crisp=true;
font=Parisienne-Small.ttf;
*/
void setup() {
  size(375, 667);
  text(random(20),width/8,height-20);
}
void draw() {
  background(100);
  textSize(fontsize); 
  PFont font = createFont("Parisienne-Small.ttf", fontsize); // メイリオ, 32ptで生成
  textFont(font, fontsize);
  fill(255, 255, 255);
  rect(0, 0, width/4, height);
  rect(width/4*3, 0, width/4, height);
  fill(255-playerA*10, 0+playerA*10, 0, 160);
  text(Math.floor(playerA), width/8, height/2);
  fill(255-playerB*10, 0+playerB*10, 0, 160);
  text(Math.floor(playerB), width-width/8, height/2);
  fill(255,0,255);
  rect(width/4,height-height/7,width/2,height/7);
  rect(width/4,0,width/2,height/7);
  line(width/2,0,width/2,height/7);
  fill(0);
  textAlign(CENTER);
  text(damages,width/2-10,height/4*3);
  if(beforerect==1){
	if(colorrush>255){
	colorrushpoint=1;
    }
	if(colorrush<1){
	colorrushpoint=0;
	}
	if(colorrushpoint==0){
	colorrush++;
	}
	if(colorrushpoint==1){
	colorrush--;
	}
    fill(colorrush,colorrush/2,colorrush/4,200-colorrush/2);
    ellipse(mouseX+1,dragy+1,fontsize/2-1,fontsize/2-1);
    fill(colorrush,colorrush/2,colorrush/4,200);
    rect(mouseX-fontsize/4,dragy-fontsize/4,fontsize/2,fontsize/2);
	}
  if(Asaikoro>Bsaikoro){
    textAlign(CENTER);
  text("A+"+Asaikoro+" B+"+Bsaikoro+" so",width/2-10,height-fontsize*2);
      textAlign(CENTER);
  text("A won",width/2-10,height-fontsize);
  }
  if(Bsaikoro>Asaikoro){
      text("A+"+Asaikoro+" B+"+Bsaikoro+" so",width/2-10,height-fontsize*2);
  text("B won",width/2-10,height-fontsize);
  }
}
void mouseDragged() {
  value=value+1;
  Adamages= playerA-Abefore;
  Bdamages= playerB-Bbefore;
  if(width/4*3<mouseX){
  playerB=Bbefore+mouseY/20-dragy/20;
  if((Bdamages<-2)||(Bdamages>1)){
    damages="PlayerB"+Math.ceil(Bdamages)+"points";
	}else{
	  damages="PlayerB"+Math.ceil(Bdamages)+"point";
	  }
  Abefore=playerA;
  }
  if(width/4*1>mouseX){
  playerA=Abefore+mouseY/20-dragy/20;  
  if((Adamages<-2)||(Adamages>1)){
    damages="PlayerA"+Math.ceil(Adamages)+"points";
	}else{
	  damages="PlayerA"+Math.ceil(Adamages)+"point";
	  }
  Bbefore=playerB;
  }
  if (value > 5) {
    value=0;
  }
}
void mouseWheel(MouseEvent event) {
  int e = event.getCount();
  Adamages=Math.ceil(playerA-Abefore)-1;
  Bdamages=Math.ceil(playerB-Bbefore)-1;
  if(width/4*3<mouseX){
  playerB=playerB+e;
  damages="PlayerB"+int(Bdamages);
  Abefore=playerA;
  }
  if(width/4*1>mouseX){
  playerA=playerA+e;
  damages="PlayerA"+int(Adamages);
  Bbefore=playerB;
}
}
void mousePressed(){
  beforerect=1;
  dragy=mouseY;
  Abefore=playerA;
  Bbefore=playerB;
  damages="";
  if((width/4<mouseX)&&(mouseX<width/2)&&(mouseY<height/7)){
  fontsize=fontsize+2;
  }
  if((width/2<mouseX)&&(mouseX<width/4*3)&&(mouseY<height/7)){
  fontsize=fontsize-2;
  }
  if((width/4<mouseX)&&(mouseX<width/4*3)&&(mouseY>height-height/7)){
Asaikoro=int(random(1,21));
Bsaikoro=int(random(1,21));
  }
}
void mouseReleased() {
beforerect=0;
}

</script>
<canvas width="375" height="667"></canvas>
</body>
</html>
